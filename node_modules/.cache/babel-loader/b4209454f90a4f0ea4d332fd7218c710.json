{"ast":null,"code":"export function parseSqlQuery(query) {\n  var tableRegex = /FROM\\s+([\\w\\d_]+)/i;\n  var columnRegex = /SELECT\\s+([\\w\\d_,\\s]+)/i;\n  var tableMatch = tableRegex.exec(query);\n  var columnMatch = columnRegex.exec(query);\n  if (!tableMatch) {\n    throw new Error('Invalid SQL query: no FROM clause');\n  }\n  var table = tableMatch[1];\n  if (!columnMatch) {\n    return {\n      table: table,\n      columns: []\n    };\n  }\n  var columns = columnMatch[1].split(',').map(function (c) {\n    return {\n      table: table,\n      column: c.trim()\n    };\n  });\n  return {\n    table: table,\n    columns: columns\n  };\n}","map":{"version":3,"names":["parseSqlQuery","query","tableRegex","columnRegex","tableMatch","exec","columnMatch","Error","table","columns","split","map","c","column","trim"],"sources":["/Users/bk/data_work/react-lineage/src/services/sqlParser.ts"],"sourcesContent":["import { Column, ParsedQuery } from '../interfaces/interfaces';\n\nexport function parseSqlQuery(query: string): ParsedQuery {\n  const tableRegex = /FROM\\s+([\\w\\d_]+)/i;\n  const columnRegex = /SELECT\\s+([\\w\\d_,\\s]+)/i;\n\n  const tableMatch = tableRegex.exec(query);\n  const columnMatch = columnRegex.exec(query);\n\n  if (!tableMatch) {\n    throw new Error('Invalid SQL query: no FROM clause');\n  }\n\n  const table = tableMatch[1];\n\n  if (!columnMatch) {\n    return { table, columns: [] };\n  }\n\n  const columns = columnMatch[1]\n    .split(',')\n    .map((c) => ({ table, column: c.trim() }));\n\n  return { table, columns };\n}\n\n\n"],"mappings":"AAEA,OAAO,SAASA,aAAaA,CAACC,KAAa,EAAe;EACxD,IAAMC,UAAU,GAAG,oBAAoB;EACvC,IAAMC,WAAW,GAAG,yBAAyB;EAE7C,IAAMC,UAAU,GAAGF,UAAU,CAACG,IAAI,CAACJ,KAAK,CAAC;EACzC,IAAMK,WAAW,GAAGH,WAAW,CAACE,IAAI,CAACJ,KAAK,CAAC;EAE3C,IAAI,CAACG,UAAU,EAAE;IACf,MAAM,IAAIG,KAAK,CAAC,mCAAmC,CAAC;EACtD;EAEA,IAAMC,KAAK,GAAGJ,UAAU,CAAC,CAAC,CAAC;EAE3B,IAAI,CAACE,WAAW,EAAE;IAChB,OAAO;MAAEE,KAAK,EAALA,KAAK;MAAEC,OAAO,EAAE;IAAG,CAAC;EAC/B;EAEA,IAAMA,OAAO,GAAGH,WAAW,CAAC,CAAC,CAAC,CAC3BI,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAAC,UAACC,CAAC;IAAA,OAAM;MAAEJ,KAAK,EAALA,KAAK;MAAEK,MAAM,EAAED,CAAC,CAACE,IAAI;IAAG,CAAC;EAAA,CAAC,CAAC;EAE5C,OAAO;IAAEN,KAAK,EAALA,KAAK;IAAEC,OAAO,EAAPA;EAAQ,CAAC;AAC3B"},"metadata":{},"sourceType":"module"}