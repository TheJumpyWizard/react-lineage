{"ast":null,"code":"import _slicedToArray from \"/Users/bk/data_work/react-lineage/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { Parser } from 'node-sql-parser';\nvar parser = new Parser();\nexport function parseSqlQuery(query) {\n  var ast = parser.astify(query);\n  if (!ast || !ast.from || !ast.from.length) {\n    throw new Error('Invalid SQL query: no FROM clause');\n  }\n  var table = ast.from[0].table;\n  var columns = ast.selectList.map(function (select) {\n    var _select$expr$column$s = select.expr.column.split('.'),\n      _select$expr$column$s2 = _slicedToArray(_select$expr$column$s, 2),\n      table = _select$expr$column$s2[0],\n      column = _select$expr$column$s2[1];\n    return {\n      table: table,\n      column: column\n    };\n  });\n  return {\n    table: table,\n    columns: columns\n  };\n}","map":{"version":3,"names":["Parser","parser","parseSqlQuery","query","ast","astify","from","length","Error","table","columns","selectList","map","select","_select$expr$column$s","expr","column","split","_select$expr$column$s2","_slicedToArray"],"sources":["/Users/bk/data_work/react-lineage/src/services/sqlParser.ts"],"sourcesContent":["import { Parser } from 'node-sql-parser';\nimport { Column, ParsedQuery } from '../interfaces/interfaces';\n\nconst parser = new Parser();\n\nexport function parseSqlQuery(query: string): ParsedQuery {\n  const ast = parser.astify(query);\n\n  if (!ast || !ast.from || !ast.from.length) {\n    throw new Error('Invalid SQL query: no FROM clause');\n  }\n\n  const table = ast.from[0].table;\n  const columns = ast.selectList.map((select: any) => {\n    const [table, column] = select.expr.column.split('.');\n    return { table, column };\n  });\n\n  return { table, columns };\n}\n"],"mappings":";AAAA,SAASA,MAAM,QAAQ,iBAAiB;AAGxC,IAAMC,MAAM,GAAG,IAAID,MAAM,EAAE;AAE3B,OAAO,SAASE,aAAaA,CAACC,KAAa,EAAe;EACxD,IAAMC,GAAG,GAAGH,MAAM,CAACI,MAAM,CAACF,KAAK,CAAC;EAEhC,IAAI,CAACC,GAAG,IAAI,CAACA,GAAG,CAACE,IAAI,IAAI,CAACF,GAAG,CAACE,IAAI,CAACC,MAAM,EAAE;IACzC,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;EACtD;EAEA,IAAMC,KAAK,GAAGL,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC,CAACG,KAAK;EAC/B,IAAMC,OAAO,GAAGN,GAAG,CAACO,UAAU,CAACC,GAAG,CAAC,UAACC,MAAW,EAAK;IAAA,IAAAC,qBAAA,GAC1BD,MAAM,CAACE,IAAI,CAACC,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC;MAAAC,sBAAA,GAAAC,cAAA,CAAAL,qBAAA;MAA9CL,KAAK,GAAAS,sBAAA;MAAEF,MAAM,GAAAE,sBAAA;IACpB,OAAO;MAAET,KAAK,EAALA,KAAK;MAAEO,MAAM,EAANA;IAAO,CAAC;EAC1B,CAAC,CAAC;EAEF,OAAO;IAAEP,KAAK,EAALA,KAAK;IAAEC,OAAO,EAAPA;EAAQ,CAAC;AAC3B"},"metadata":{},"sourceType":"module"}